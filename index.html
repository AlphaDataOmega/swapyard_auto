<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwapYard AutoPilot</title>
    <script>
        //Declare Variables
        swapyardContractAddress = "0x064cc89B8635ec181421D2545347BEdAe204bD11";
        minLoan = 10;

        exchanges = [
            { name: 'QuickSwap', factory: '0x5757371414417b8c6caad45baef941abc7d3ab32', router: '0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff' },
            { name: 'SushiSwap', factory: '0xc35dadb65012ec5796536bd9864ed8773abc74c4', router: '0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff' },
            { name: 'ApeSwap', factory: '0xCf083Be4164828f00cAE704EC15a36D711491284', router: '0xC0788A3aD43d79aa53B09c2EaCc313A787d1d607' },
            { name: 'PolyDex', factory: '0x5bdd1cd910e3307582f213b33699e676e61dead9', router: '0xBd13225f0a45BEad8510267B4D6a7c78146Be459' },
            { name: 'Jetswap', factory: '0x668ad0ed2622c62e24f0d5ab6b6ac1b9d2cd4ac7', router: '0x5C6EC38fb0e2609672BDf628B1fD605A523E5923' },
            { name: 'Steak House', factory: '0x42E635D36913c94a340567761Ec8383b9932906a', router: '0x5D54689e49c5873dC87DD410dD780c940D17F466' },
            { name: 'WaultSwap', factory: '0xa98ea6356A316b44Bf710D5f9b6b4eA0081409Ef', router: '0x3a1D87f206D12415f5b0A33E786967680AAb4f6d' },
            { name: 'Dfyn Exchange', factory: '0xE7Fb3e833eFE5F9c441105EB65Ef8b261266423B', router: '0xA102072A4C07F06EC3B4900FDC4C7B80b6c57429' },
            { name: 'Cometh', factory: '0x800b052609c355cA8103E06F022aA30647eAd60a', router: '0x93bcDc45f7e62f89a8e901DC4A0E2c6C427D9F25' }
        ]

        abis = [
            { name: 'Swapyard_ABI', abi: [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"baseAmount","type":"uint256"},{"internalType":"uint256","name":"quoteAmount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"DPPFlashLoanCall","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"baseAmount","type":"uint256"},{"internalType":"uint256","name":"quoteAmount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"DSPFlashLoanCall","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"baseAmount","type":"uint256"},{"internalType":"uint256","name":"quoteAmount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"DVMFlashLoanCall","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"buyRouter","outputs":[{"internalType":"contract IUniswapV2Router02","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_flashLoanPool","type":"address"},{"internalType":"address","name":"_token0","type":"address"},{"internalType":"address","name":"_token1","type":"address"},{"internalType":"uint256","name":"_flashAmount","type":"uint256"},{"internalType":"address","name":"_buyRouter","type":"address"},{"internalType":"address","name":"_sellRouter","type":"address"},{"internalType":"address","name":"_user","type":"address"}],"name":"executeTrade","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"tokenA","type":"address"},{"internalType":"address","name":"tokenB","type":"address"},{"internalType":"uint256","name":"truePriceTokenA","type":"uint256"},{"internalType":"uint256","name":"truePriceTokenB","type":"uint256"},{"internalType":"uint256","name":"maxSpendTokenA","type":"uint256"},{"internalType":"uint256","name":"maxSpendTokenB","type":"uint256"},{"internalType":"address","name":"factory","type":"address"}],"name":"getMaxSwap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"sellRouter","outputs":[{"internalType":"contract IUniswapV2Router02","name":"","type":"address"}],"stateMutability":"view","type":"function"}]},
            { name: 'Token_ABI', abi: [{ "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "spender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Approval", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "inputs": [], "name": "name", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "symbol", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "decimals", "outputs": [{ "internalType": "uint8", "name": "", "type": "uint8" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "totalSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" }], "name": "allowance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "approve", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "transfer", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "from", "type": "address" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }] },
            { name: 'UniswapV2_Router_ABI', abi: [{ "inputs": [], "name": "WETH", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "pure", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "tokenA", "type": "address" }, { "internalType": "address", "name": "tokenB", "type": "address" }, { "internalType": "uint256", "name": "amountADesired", "type": "uint256" }, { "internalType": "uint256", "name": "amountBDesired", "type": "uint256" }, { "internalType": "uint256", "name": "amountAMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountBMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "addLiquidity", "outputs": [{ "internalType": "uint256", "name": "amountA", "type": "uint256" }, { "internalType": "uint256", "name": "amountB", "type": "uint256" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token", "type": "address" }, { "internalType": "uint256", "name": "amountTokenDesired", "type": "uint256" }, { "internalType": "uint256", "name": "amountTokenMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountETHMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "addLiquidityETH", "outputs": [{ "internalType": "uint256", "name": "amountToken", "type": "uint256" }, { "internalType": "uint256", "name": "amountETH", "type": "uint256" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }], "stateMutability": "payable", "type": "function" }, { "inputs": [], "name": "factory", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "pure", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "uint256", "name": "reserveIn", "type": "uint256" }, { "internalType": "uint256", "name": "reserveOut", "type": "uint256" }], "name": "getAmountIn", "outputs": [{ "internalType": "uint256", "name": "amountIn", "type": "uint256" }], "stateMutability": "pure", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "uint256", "name": "reserveIn", "type": "uint256" }, { "internalType": "uint256", "name": "reserveOut", "type": "uint256" }], "name": "getAmountOut", "outputs": [{ "internalType": "uint256", "name": "amountOut", "type": "uint256" }], "stateMutability": "pure", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }], "name": "getAmountsIn", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }], "name": "getAmountsOut", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountA", "type": "uint256" }, { "internalType": "uint256", "name": "reserveA", "type": "uint256" }, { "internalType": "uint256", "name": "reserveB", "type": "uint256" }], "name": "quote", "outputs": [{ "internalType": "uint256", "name": "amountB", "type": "uint256" }], "stateMutability": "pure", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "tokenA", "type": "address" }, { "internalType": "address", "name": "tokenB", "type": "address" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }, { "internalType": "uint256", "name": "amountAMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountBMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "removeLiquidity", "outputs": [{ "internalType": "uint256", "name": "amountA", "type": "uint256" }, { "internalType": "uint256", "name": "amountB", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token", "type": "address" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }, { "internalType": "uint256", "name": "amountTokenMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountETHMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "removeLiquidityETH", "outputs": [{ "internalType": "uint256", "name": "amountToken", "type": "uint256" }, { "internalType": "uint256", "name": "amountETH", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token", "type": "address" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }, { "internalType": "uint256", "name": "amountTokenMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountETHMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }, { "internalType": "bool", "name": "approveMax", "type": "bool" }, { "internalType": "uint8", "name": "v", "type": "uint8" }, { "internalType": "bytes32", "name": "r", "type": "bytes32" }, { "internalType": "bytes32", "name": "s", "type": "bytes32" }], "name": "removeLiquidityETHWithPermit", "outputs": [{ "internalType": "uint256", "name": "amountToken", "type": "uint256" }, { "internalType": "uint256", "name": "amountETH", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "tokenA", "type": "address" }, { "internalType": "address", "name": "tokenB", "type": "address" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }, { "internalType": "uint256", "name": "amountAMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountBMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }, { "internalType": "bool", "name": "approveMax", "type": "bool" }, { "internalType": "uint8", "name": "v", "type": "uint8" }, { "internalType": "bytes32", "name": "r", "type": "bytes32" }, { "internalType": "bytes32", "name": "s", "type": "bytes32" }], "name": "removeLiquidityWithPermit", "outputs": [{ "internalType": "uint256", "name": "amountA", "type": "uint256" }, { "internalType": "uint256", "name": "amountB", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapETHForExactTokens", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "payable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountOutMin", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapExactETHForTokens", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "payable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "uint256", "name": "amountOutMin", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapExactTokensForETH", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "uint256", "name": "amountOutMin", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapExactTokensForTokens", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "uint256", "name": "amountInMax", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapTokensForExactETH", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountOut", "type": "uint256" }, { "internalType": "uint256", "name": "amountInMax", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapTokensForExactTokens", "outputs": [{ "internalType": "uint256[]", "name": "amounts", "type": "uint256[]" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token", "type": "address" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }, { "internalType": "uint256", "name": "amountTokenMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountETHMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "removeLiquidityETHSupportingFeeOnTransferTokens", "outputs": [{ "internalType": "uint256", "name": "amountETH", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token", "type": "address" }, { "internalType": "uint256", "name": "liquidity", "type": "uint256" }, { "internalType": "uint256", "name": "amountTokenMin", "type": "uint256" }, { "internalType": "uint256", "name": "amountETHMin", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }, { "internalType": "bool", "name": "approveMax", "type": "bool" }, { "internalType": "uint8", "name": "v", "type": "uint8" }, { "internalType": "bytes32", "name": "r", "type": "bytes32" }, { "internalType": "bytes32", "name": "s", "type": "bytes32" }], "name": "removeLiquidityETHWithPermitSupportingFeeOnTransferTokens", "outputs": [{ "internalType": "uint256", "name": "amountETH", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "uint256", "name": "amountOutMin", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapExactTokensForTokensSupportingFeeOnTransferTokens", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountOutMin", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapExactETHForTokensSupportingFeeOnTransferTokens", "outputs": [], "stateMutability": "payable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amountIn", "type": "uint256" }, { "internalType": "uint256", "name": "amountOutMin", "type": "uint256" }, { "internalType": "address[]", "name": "path", "type": "address[]" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }], "name": "swapExactTokensForETHSupportingFeeOnTransferTokens", "outputs": [], "stateMutability": "nonpayable", "type": "function" }] },
            { name: 'UniswapV2_Factory_ABI', abi: [{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"token0","type":"address"},{"indexed":true,"internalType":"address","name":"token1","type":"address"},{"indexed":false,"internalType":"address","name":"pair","type":"address"},{"indexed":false,"internalType":"uint256","name":"","type":"uint256"}],"name":"PairCreated","type":"event"},{"inputs":[],"name":"feeTo","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feeToSetter","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"tokenA","type":"address"},{"internalType":"address","name":"tokenB","type":"address"}],"name":"getPair","outputs":[{"internalType":"address","name":"pair","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"allPairs","outputs":[{"internalType":"address","name":"pair","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"allPairsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"tokenA","type":"address"},{"internalType":"address","name":"tokenB","type":"address"}],"name":"createPair","outputs":[{"internalType":"address","name":"pair","type":"address"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"setFeeTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"setFeeToSetter","outputs":[],"stateMutability":"nonpayable","type":"function"}] },
            { name: 'UniswapV2_Pair_ABI', abi: [{ "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "owner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "spender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Approval", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount0", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "amount1", "type": "uint256" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }], "name": "Burn", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount0", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "amount1", "type": "uint256" }], "name": "Mint", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "sender", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "amount0In", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "amount1In", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "amount0Out", "type": "uint256" }, { "indexed": false, "internalType": "uint256", "name": "amount1Out", "type": "uint256" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }], "name": "Swap", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "uint112", "name": "reserve0", "type": "uint112" }, { "indexed": false, "internalType": "uint112", "name": "reserve1", "type": "uint112" }], "name": "Sync", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "from", "type": "address" }, { "indexed": true, "internalType": "address", "name": "to", "type": "address" }, { "indexed": false, "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "Transfer", "type": "event" }, { "inputs": [], "name": "name", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "pure", "type": "function" }, { "inputs": [], "name": "symbol", "outputs": [{ "internalType": "string", "name": "", "type": "string" }], "stateMutability": "pure", "type": "function" }, { "inputs": [], "name": "decimals", "outputs": [{ "internalType": "uint8", "name": "", "type": "uint8" }], "stateMutability": "pure", "type": "function" }, { "inputs": [], "name": "totalSupply", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }], "name": "balanceOf", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" }], "name": "allowance", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "approve", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "transfer", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "from", "type": "address" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }], "name": "transferFrom", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "DOMAIN_SEPARATOR", "outputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "PERMIT_TYPEHASH", "outputs": [{ "internalType": "bytes32", "name": "", "type": "bytes32" }], "stateMutability": "pure", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }], "name": "nonces", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "owner", "type": "address" }, { "internalType": "address", "name": "spender", "type": "address" }, { "internalType": "uint256", "name": "value", "type": "uint256" }, { "internalType": "uint256", "name": "deadline", "type": "uint256" }, { "internalType": "uint8", "name": "v", "type": "uint8" }, { "internalType": "bytes32", "name": "r", "type": "bytes32" }, { "internalType": "bytes32", "name": "s", "type": "bytes32" }], "name": "permit", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "MINIMUM_LIQUIDITY", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "pure", "type": "function" }, { "inputs": [], "name": "factory", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "token0", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "token1", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "getReserves", "outputs": [{ "internalType": "uint112", "name": "reserve0", "type": "uint112" }, { "internalType": "uint112", "name": "reserve1", "type": "uint112" }, { "internalType": "uint32", "name": "blockTimestampLast", "type": "uint32" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "price0CumulativeLast", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "price1CumulativeLast", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "kLast", "outputs": [{ "internalType": "uint256", "name": "", "type": "uint256" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "to", "type": "address" }], "name": "mint", "outputs": [{ "internalType": "uint256", "name": "liquidity", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "to", "type": "address" }], "name": "burn", "outputs": [{ "internalType": "uint256", "name": "amount0", "type": "uint256" }, { "internalType": "uint256", "name": "amount1", "type": "uint256" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "uint256", "name": "amount0Out", "type": "uint256" }, { "internalType": "uint256", "name": "amount1Out", "type": "uint256" }, { "internalType": "address", "name": "to", "type": "address" }, { "internalType": "bytes", "name": "data", "type": "bytes" }], "name": "swap", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "to", "type": "address" }], "name": "skim", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "sync", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "address", "name": "", "type": "address" }], "name": "initialize", "outputs": [], "stateMutability": "nonpayable", "type": "function" }] },
        ]

        loanPaths = [
            { loanToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174', pairToken: '0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270', },
            { loanToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174', pairToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619', },
            { loanToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174', pairToken: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F', },
            { loanToken: '0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270', pairToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174', },
            { loanToken: '0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270', pairToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619', },
            { loanToken: '0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270', pairToken: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F', },
            { loanToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619', pairToken: '0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270', },
            { loanToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619', pairToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174', },
            { loanToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619', pairToken: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F', },
            { loanToken: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F', pairToken: '0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270', },
            { loanToken: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F', pairToken: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619', },
            { loanToken: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F', pairToken: '0x2791bca1f2de4661ed88a30c99a7a9449aa84174', }
        ]

        loanFactories = [
            { name: 'DODOPrivateFactory', address: '0xd24153244066F0afA9415563bFC7Ba248bfB7a51', abi: [{ "inputs": [{ "internalType": "address", "name": "cloneFactory", "type": "address" }, { "internalType": "address", "name": "dppTemplate", "type": "address" }, { "internalType": "address", "name": "dppAdminTemplate", "type": "address" }, { "internalType": "address", "name": "defaultMaintainer", "type": "address" }, { "internalType": "address", "name": "defaultMtFeeRateModel", "type": "address" }, { "internalType": "address", "name": "dodoApproveProxy", "type": "address" }], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "baseToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "quoteToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "creator", "type": "address" }, { "indexed": false, "internalType": "address", "name": "dpp", "type": "address" }], "name": "NewDPP", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferPrepared", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "dpp", "type": "address" }], "name": "RemoveDPP", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "admin", "type": "address" }], "name": "addAdmin", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "admin", "type": "address" }], "name": "removeAdmin", "type": "event" }, { "inputs": [], "name": "_CLONE_FACTORY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DEFAULT_MAINTAINER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DEFAULT_MT_FEE_RATE_MODEL_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DODO_APPROVE_PROXY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DPP_ADMIN_TEMPLATE_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DPP_TEMPLATE_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_NEW_OWNER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_OWNER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "_REGISTRY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "_USER_REGISTRY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "contractAddr", "type": "address" }], "name": "addAdminList", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "creator", "type": "address" }, { "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "address", "name": "pool", "type": "address" }], "name": "addPoolByAdmin", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address[]", "name": "creators", "type": "address[]" }, { "internalType": "address[]", "name": "baseTokens", "type": "address[]" }, { "internalType": "address[]", "name": "quoteTokens", "type": "address[]" }, { "internalType": "address[]", "name": "pools", "type": "address[]" }], "name": "batchAddPoolByAdmin", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "claimOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "createDODOPrivatePool", "outputs": [{ "internalType": "address", "name": "newPrivatePool", "type": "address" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }], "name": "getDODOPool", "outputs": [{ "internalType": "address[]", "name": "pools", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token0", "type": "address" }, { "internalType": "address", "name": "token1", "type": "address" }], "name": "getDODOPoolBidirection", "outputs": [{ "internalType": "address[]", "name": "baseToken0Pool", "type": "address[]" }, { "internalType": "address[]", "name": "baseToken1Pool", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "user", "type": "address" }], "name": "getDODOPoolByUser", "outputs": [{ "internalType": "address[]", "name": "pools", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "dppAddress", "type": "address" }, { "internalType": "address", "name": "creator", "type": "address" }, { "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "uint256", "name": "lpFeeRate", "type": "uint256" }, { "internalType": "uint256", "name": "k", "type": "uint256" }, { "internalType": "uint256", "name": "i", "type": "uint256" }, { "internalType": "bool", "name": "isOpenTwap", "type": "bool" }], "name": "initDODOPrivatePool", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "initOwner", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }], "name": "isAdminListed", "outputs": [{ "internalType": "bool", "name": "", "type": "bool" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "contractAddr", "type": "address" }], "name": "removeAdminList", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "creator", "type": "address" }, { "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "address", "name": "pool", "type": "address" }], "name": "removePoolByAdmin", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_newDPPAdminTemplate", "type": "address" }], "name": "updateAdminTemplate", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_newMaintainer", "type": "address" }], "name": "updateDefaultMaintainer", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_newDPPTemplate", "type": "address" }], "name": "updateDppTemplate", "outputs": [], "stateMutability": "nonpayable", "type": "function" }] },
            { name: 'DODOVendingFactory', address: '0x79887f65f83bdf15Bcc8736b5e5BcDB48fb8fE13', abi: [{ "inputs": [{ "internalType": "address", "name": "cloneFactory", "type": "address" }, { "internalType": "address", "name": "dvmTemplate", "type": "address" }, { "internalType": "address", "name": "defaultMaintainer", "type": "address" }, { "internalType": "address", "name": "defaultMtFeeRateModel", "type": "address" }], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "baseToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "quoteToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "creator", "type": "address" }, { "indexed": false, "internalType": "address", "name": "dvm", "type": "address" }], "name": "NewDVM", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferPrepared", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "dvm", "type": "address" }], "name": "RemoveDVM", "type": "event" }, { "inputs": [], "name": "_CLONE_FACTORY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DEFAULT_MAINTAINER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DEFAULT_MT_FEE_RATE_MODEL_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DVM_TEMPLATE_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_NEW_OWNER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_OWNER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "_REGISTRY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "_USER_REGISTRY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "creator", "type": "address" }, { "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "address", "name": "pool", "type": "address" }], "name": "addPoolByAdmin", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "claimOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "uint256", "name": "lpFeeRate", "type": "uint256" }, { "internalType": "uint256", "name": "i", "type": "uint256" }, { "internalType": "uint256", "name": "k", "type": "uint256" }, { "internalType": "bool", "name": "isOpenTWAP", "type": "bool" }], "name": "createDODOVendingMachine", "outputs": [{ "internalType": "address", "name": "newVendingMachine", "type": "address" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }], "name": "getDODOPool", "outputs": [{ "internalType": "address[]", "name": "machines", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token0", "type": "address" }, { "internalType": "address", "name": "token1", "type": "address" }], "name": "getDODOPoolBidirection", "outputs": [{ "internalType": "address[]", "name": "baseToken0Machines", "type": "address[]" }, { "internalType": "address[]", "name": "baseToken1Machines", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "user", "type": "address" }], "name": "getDODOPoolByUser", "outputs": [{ "internalType": "address[]", "name": "machines", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "initOwner", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "creator", "type": "address" }, { "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "address", "name": "pool", "type": "address" }], "name": "removePoolByAdmin", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_newDVMTemplate", "type": "address" }], "name": "updateDvmTemplate", "outputs": [], "stateMutability": "nonpayable", "type": "function" }] },
            { name: 'DODOStableFactory', address: '0x43C49f8DD240e1545F147211Ec9f917376Ac1e87', abi: [{ "inputs": [{ "internalType": "address", "name": "cloneFactory", "type": "address" }, { "internalType": "address", "name": "DSPTemplate", "type": "address" }, { "internalType": "address", "name": "defaultMaintainer", "type": "address" }, { "internalType": "address", "name": "defaultMtFeeRateModel", "type": "address" }], "stateMutability": "nonpayable", "type": "constructor" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "baseToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "quoteToken", "type": "address" }, { "indexed": false, "internalType": "address", "name": "creator", "type": "address" }, { "indexed": false, "internalType": "address", "name": "DSP", "type": "address" }], "name": "NewDSP", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferPrepared", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": true, "internalType": "address", "name": "previousOwner", "type": "address" }, { "indexed": true, "internalType": "address", "name": "newOwner", "type": "address" }], "name": "OwnershipTransferred", "type": "event" }, { "anonymous": false, "inputs": [{ "indexed": false, "internalType": "address", "name": "DSP", "type": "address" }], "name": "RemoveDSP", "type": "event" }, { "inputs": [], "name": "_CLONE_FACTORY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DEFAULT_MAINTAINER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DEFAULT_MT_FEE_RATE_MODEL_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_DSP_TEMPLATE_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_NEW_OWNER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [], "name": "_OWNER_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "_REGISTRY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "", "type": "address" }, { "internalType": "uint256", "name": "", "type": "uint256" }], "name": "_USER_REGISTRY_", "outputs": [{ "internalType": "address", "name": "", "type": "address" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "creator", "type": "address" }, { "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "address", "name": "pool", "type": "address" }], "name": "addPoolByAdmin", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "name": "claimOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "uint256", "name": "lpFeeRate", "type": "uint256" }, { "internalType": "uint256", "name": "i", "type": "uint256" }, { "internalType": "uint256", "name": "k", "type": "uint256" }, { "internalType": "bool", "name": "isOpenTWAP", "type": "bool" }], "name": "createDODOStablePool", "outputs": [{ "internalType": "address", "name": "newStablePool", "type": "address" }], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }], "name": "getDODOPool", "outputs": [{ "internalType": "address[]", "name": "machines", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "token0", "type": "address" }, { "internalType": "address", "name": "token1", "type": "address" }], "name": "getDODOPoolBidirection", "outputs": [{ "internalType": "address[]", "name": "baseToken0Machines", "type": "address[]" }, { "internalType": "address[]", "name": "baseToken1Machines", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "user", "type": "address" }], "name": "getDODOPoolByUser", "outputs": [{ "internalType": "address[]", "name": "machines", "type": "address[]" }], "stateMutability": "view", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "initOwner", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "creator", "type": "address" }, { "internalType": "address", "name": "baseToken", "type": "address" }, { "internalType": "address", "name": "quoteToken", "type": "address" }, { "internalType": "address", "name": "pool", "type": "address" }], "name": "removePoolByAdmin", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "newOwner", "type": "address" }], "name": "transferOwnership", "outputs": [], "stateMutability": "nonpayable", "type": "function" }, { "inputs": [{ "internalType": "address", "name": "_newDSPTemplate", "type": "address" }], "name": "updateDSPTemplate", "outputs": [], "stateMutability": "nonpayable", "type": "function" }] }
        ]

        loanFactories.forEach(loanFactory => {
            loanFactoryContract = await new web3.eth.Contract(loanFactory.abi, loanFactory.address);
            loanPaths.forEach(loanPath => {
                loanPools = await loanFactoryContract.methods.getDODOPool(loanPath.loanToken, loanPath.pairToken).call();
                if (loanPools !== null) {

                    loanTokenContract = await new web3.eth.Contract(abis.find((abi) => abi.name == "Token_ABI"), loanPath.loanToken)
                    loanTokenDecimals = await loanTokenContract.methods.decimals().call();
                    loanTokenSymbol = await loanTokenContract.methods.symbol().call();
                    USDPrice = await getUSDPrice(loanPath.loanToken);
                    minReservesRequired = (1000 / USDPrice) * (1*(10**loanTokenDecimals));

                    loanPools.forEach(loanPool => {
                        loanPoolContract = await new web3.eth.Contract(abis.find((abi) => abi.name == "DODOPair_ABI"), loanPool);
                        loanPoolBaseToken = await loanPoolContract.methods._BASE_TOKEN_().call()
                        if (loanPoolBaseToken.toLowerCase().includes(loanPath.loanToken.toLowerCase())) {
                            loanPoolReserves = await loanPoolContract.methods._BASE_RESERVES_().call()                            
                        } else {
                            loanPoolReserves = await loanPoolContract.methods._QUOTE_RESERVES_().call()
                        }
                        if (loanPoolReserves > minReservesRequired) {
                            loanToken = {
                                symbol: loanTokenSymbol, address: loanPath.loanToken, decimals: loanTokenDecimals, USDPrice: USDPrice, reserves: loanPoolReserves
                            }
                            loanTokens.push(loanToken)
                        }
                    })
                }
            })
        })

        loanTokens.forEach(loanToken => {
            swapTokens = getSwapTokens(loanToken.address);
            swapTokens.forEach(swapToken => {
                exchanges.forEach(exchange => {
                    exchangeFactoryContract = await new web3.eth.Contract(abis.find((abi) => abi.name == "UniswapV2_Factory_ABI"), exchange.factory);
                    pairAddress = await exchangeFactoryContract.methods.getPool(loanToken.address, swapToken.address).call();
                    if (pairAddress != '0x00000000000000000000000000000000000000') {
                        pairContract = await new web3.eth.Contract(abis.find((abi) => abi.name == "UniswapV2_Pair_ABI"), pairAddress)
                        pairToken0 = await pairContract.methods.token0().call()
                        if ( pairToken0.toLowerCase().includes(loanToken.address.toLowerCase()) ) {
                            pairToken1 = swapToken.address
                            token0Match = true
                        } else {
                            pairToken1 = loanToken.address
                            token0Match = false
                        }
                        pair = {
                            exchange: exchange,
                            address: pairAddress,
                            token0: pairToken0,
                            token1: pairToken1,
                            token0Match: token0Match
                        }
                        pairs.push(pair)
                    }
                })
            });
        })

        pairs.forEach(pair => {
            
        })

        routes.forEach(route => {
            route.pairs.forEach(pair => {
                pairContract = new web3.eth.Contract( abis.find((abi) => abi.name == "UniswapV2_Pair_ABI"), pair.address)
                pairReserves = pairContract.methods.getReserves().call();
                if (pair.token0Match){
                    price = pairReserves[1] - pairReserves[0]
                    reserves = pairReserves[0]
                } else {
                    price = pairReserves[0] - pairReserves[1]
                    reserves = pairReserves[1]
                }
                pair.price = price
                pair.reserves = reserves
            })

            if (pair[0].reserves > pair[1].reserves) {
                buy = pair[0]
                sell = pair[1]
            } else {
                buy = pair[1]
                sell = pair[0]
            }

            buyRouterContract = await new web3.eth.Contract(abis.find((abi) => abi.name == "UniswapV2_Router_ABI"), buy.exchangeRouter)
            sellRouterContract = await new web3.eth.Contract(abis.find((abi) => abi.name == "UniswapV2_Router_ABI"), sell.exchangeRouter)

            if ( buy.reserves > sell.reserves ) {
                if (buy.reserves < loanToken.reserves) {
                    loanAmount = buy.reserves 
                    maxReserves = buy.reserves
                } else {
                    loanAmount = loanToken.reserves
                    maxReserves = loanToken.reserves
                }
            } else {
                if (sell.reserves < loanToken.reserves) {
                    loanAmount = sell.reserves
                    maxReserves = sell.reserves
                } else {
                    loanAmount = loanToken.reserves
                    maxReserves = loanToken.reserves
                }
            }

            minLoanAmount = loanAmount / 10
            while (loanAmount > minLoanAmount) {

                buyAmountsOut = await buyRouterContract.methods.getAmountsOut(loanAmount, [swapToken.address, loanToken.address]).call()
                buyTokensReturned = buyAmountsOut[0]
                
                sellAmountsOut = await sellRouterContract.methods.getAmountsOut(buyTokensReturned, [loanToken.address, swapToken.address]).call()
                sellTokensReturned = sellAmountsOut[0]

                sellAmountsIn = await sellRouterContract.methods.getAmountsIn(loanAmount, [swapToken.address, loanToken.address]).call()
                minTokensRequired = sellAmountsIn[0]       

                profit = sellTokensReturned - loanAmount

                slippage = minTokensRequired / (sellTokensReturned - minTokensRequired)

                test = {
                    loanToken: '',
                    swapToken: '',
                    loanAmount: '',
                    buyExchange: '',
                    sellExchange: '',
                    buyReserves: '',
                    sellReserves: '',
                    buyPairAddress: '',
                    sellPairAddress: '',
                    buyPrice: '',
                    sellPrice: '',
                    profit: '',
                    slippage: '',
                    transaction: '',
                    result: '',
                }
                tests.push(test)

                if (profit > 0 && slippage > 10) {
                    results = await executeTrade()
                    if (results) {
                        result = 'success'
                    } else {
                        result = 'failed'
                    }
                    transaction = results.transaction
                    trade = {
                        loanToken: '',
                        swapToken: '',
                        loanAmount: '',
                        buyExchange: '',
                        sellExchange: '',
                        buyReserves: '',
                        sellReserves: '',
                        buyPairAddress: '',
                        sellPairAddress: '',
                        buyPrice: '',
                        sellPrice: '',
                        profit: '',
                        slippage: '',
                        transaction: '',
                        result: '',
                    }
                    trades.push(trade)
                    loanAmount = 0
                } else {
                    loanAmount = loanAmount = minLoanAmount
                }
            }
        })

        async function getSwapTokens(_address) {
            //GET TRADES
            let tokens = [];
            var myHeaders = new Headers();
            myHeaders.append("X-API-KEY", "BQYKwXxx3N1v4QK8q8i4wSW8x3murMYp");
            myHeaders.append("Content-Type", "application/json");

            var graphql = JSON.stringify({
                query: "query ($network: EthereumNetwork!, $limit: Int!, $token: String!, $offset: Int!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\r\n  ethereum(network: $network) {\r\n    dexTrades(\r\n      options: {desc: \"count\", limit: $limit, offset: $offset}\r\n      date: {since: $from, till: $till}\r\n      baseCurrency: {is: $token}\r\n      protocol: {is: \"Uniswap v2\"}\r\n      exchangeName: {not: \"\" }\r\n    ) {\r\n      protocol\r\n      sellCurrency {\r\n        symbol\r\n        address\r\n      }\r\n      buyCurrency {\r\n        symbol\r\n        address\r\n      }\r\n      baseCurrency {\r\n          symbol\r\n      }\r\n      exchange {\r\n          fullName\r\n      }\r\n      buyAmount\r\n      average_buyAmount: buyAmount(calculate: average)\r\n      count\r\n      median_price: price(calculate: median)\r\n      last_price: maximum(of: block, get: price)\r\n      dates: count(uniq: dates)\r\n      started: minimum(of: date)\r\n    }\r\n  }\r\n}",
                variables: { "limit": 100, "offset": 0, "network": "matic", "token": loanTokenAddress, "from": DaysAgo, "till": rightNow, "dateFormat": "%Y-%m-%d" }
            })
            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: graphql,
                redirect: 'follow'
            };

            try {
                let res = await fetch("https://graphql.bitquery.io", requestOptions);
                data =  await res.json();
                trades = data.data.ethereum.dexTrades;
                trades.forEach(trade => {
                    tokenAddress = trade.quoteCurrency.address
                    tokenSymbol = trade.quoteCurrency.symbol
                    tokenDecimals = trade.quoteCurrency.decimals
                    if (tokens.find((token) => token.symbol === tokenSymbol) === false ) {
                        token = { symbol: tokenSymbol, address: tokenAddress, decimals: tokenDecimals }
                        tokens.push(token)
                    }
                })
                return tokens;
            } catch (error) {
                console.log(error);
            }
        }

        async function getUSDPrice(_address) {
            if (_address.toString() === '0x2791bca1f2de4661ed88a30c99a7a9449aa84174') {
                quoteTokenAddress = "0xc2132D05D31c914a87C6611C10748AEb04B58e8F";
            } else {
                quoteTokenAddress = "0x2791bca1f2de4661ed88a30c99a7a9449aa84174";
            }
            var myHeaders = new Headers();
            myHeaders.append("X-API-KEY", "BQYKwXxx3N1v4QK8q8i4wSW8x3murMYp");
            myHeaders.append("Content-Type", "application/json");

            var graphql = JSON.stringify({
                query: "query ($network: EthereumNetwork!, $quote: String!, $loanToken: String!, $limit: Int!, $offset: Int!, $from: ISO8601DateTime, $till: ISO8601DateTime) {\r\n  ethereum(network: $network) {\r\n    dexTrades(\r\n      options: {desc: [\"block.height\", \"tradeIndex\"], limit: $limit, offset: $offset}\r\n      date: {since: $from, till: $till}\r\n      buyCurrency: {is: $loanToken}\r\n      sellCurrency: {is: $quote}\r\n    ) {\r\n      block {\r\n        timestamp {\r\n          time(format: \"%Y-%m-%d %H:%M:%S\")\r\n        }\r\n        height\r\n      }\r\n      tradeIndex\r\n      protocol\r\n      exchange {\r\n        fullName\r\n      }\r\n      smartContract {\r\n        address {\r\n          address\r\n          annotation\r\n        }\r\n      }\r\n      baseAmount\r\n      baseCurrency {\r\n        address\r\n        symbol\r\n      }\r\n      base_amount_usd: baseAmount(in: USD)\r\n      quoteAmount\r\n      quoteCurrency {\r\n        address\r\n        symbol\r\n      }\r\n      quote_amount_usd: quoteAmount(in: USD)\r\n      price\r\n    }\r\n  }\r\n}\r\n",
                variables: { "limit": 1, "offset": 0, "network": "matic", "loanToken": _address, "quote": quoteTokenAddress, "from": DaysAgo, "till": rightNow, "dateFormat": "%Y-%m-%d" }
            })

            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: graphql,
                redirect: 'follow'
            };

            try {
                let res = await fetch("https://graphql.bitquery.io", requestOptions);
                data = await res.json();
                price = data.data.ethereum.dexTrades[0].price;
                return price;
            } catch (error) {
                console.log(error);
            }
        };

        function log(_string) {
            let div = document.createElement("div")
            div.prepend(_string)
        }

    </script>
</head>
<body>
    
</body>
</html>
